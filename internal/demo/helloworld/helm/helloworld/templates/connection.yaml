{{- if not .Values.temporal.connectionName }}
apiVersion: temporal.io/v1alpha1
kind: TemporalConnection
metadata:
  name: {{ .Release.Name }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "helloworld.labels" . | nindent 4 }}
spec:
  hostPort: "{{ .Values.temporal.address }}"
  {{- $apiSecretName := .Values.temporal.apiKey.name | trim }}
  {{- $apiSecretKey := .Values.temporal.apiKey.key | trim }}
  {{- if $apiSecretName }}
  apiKeySecretRef:
    name: {{ $apiSecretName | quote }}
    key: {{ $apiSecretKey | quote }}
  {{- end }}
  {{- if .Values.temporal.mtlsSecretName }}
  mutualTLSSecretRef:
    name: {{ .Values.temporal.mtlsSecretName | quote }}
  {{- end }}
{{- end }}