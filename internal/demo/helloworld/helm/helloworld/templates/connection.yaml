{{- if not .Values.temporal.connectionName }}
apiVersion: temporal.io/v1alpha1
kind: TemporalConnection
metadata:
  name: {{ .Release.Name }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "helloworld.labels" . | nindent 4 }}
spec:
  hostPort: "{{ .Values.temporal.address }}"
  {{- $apiKey := .Values.temporal.apiKeySecretName | default "" | trim }}
  {{- if and $apiKey (ne $apiKey "null") }}
  apiKeyRef:
    name: {{ $apiKey | quote }}
  {{- end }}
  {{- if .Values.temporal.mtlsSecretName }}
  mutualTLSSecretRef:
    name: {{ .Values.temporal.mtlsSecretName | quote }}
  {{- end }}
{{- end }}
